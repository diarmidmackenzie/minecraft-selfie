<html>
  <head>
  <meta charset="utf-8">
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3.1675466862/camera_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4.1633559619/face_mesh.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5.1675469404/pose.js" crossorigin="anonymous"></script>

  <script src="../src/block-head.js"></script>
  <script src="../src/face-geometry.js"></script>
  <link rel="stylesheet" href="../src/minecraft-selfie.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.52/dist/themes/light.css">
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.52/dist/shoelace.js"></script>

  </head>
  <body>
    <div class="container">
      <video id="input-video" class="input_video"></video>
      <div class="controls">
        <sl-drawer id="skins" label="Skins" placement="start">
          <sl-card id="skin-steve" class="card-image">
           <img
             slot="image"
             src="../assets/minecraft/icons/skins/steve.jpg">
             Steve
          </sl-card>
          <sl-card id="skin-alex" class="card-image">
           <img
             slot="image"
             src="../assets/minecraft/icons/skins/alex.png">
             Alex
          </sl-card>
          <sl-card id="skin-creeper" class="card-image">
           <img
             slot="image"
             src="../assets/minecraft/icons/skins/creeper.png">
             Creeper
          </sl-card>
          <sl-card id="skin-dantdm" class="card-image">
           <img
             slot="image"
             src="../assets/minecraft/icons/skins/dantdm.png">
             DanTDM
          </sl-card>
          <p>Coming soon...</p>
          <p>You'll be able to upload your own skins</p>
          <p>And I'll enable adjustment of eyes, mouth and eyebrows to better fit with different skins</p>
          <sl-button slot="footer" type="primary">Close</sl-button>
        </sl-drawer>

        <sl-card class="card-image">
         <img
           slot="image"
           src="../assets/minecraft/icons/skins.jpg">
           Skins
        </sl-card>
        <sl-drawer id="backgrounds" label="Backgrounds" placement="start">
          <p> Coming soon...</p>
          <p> You'll be able to choose from a range of backgrounds for your avatar</p>
          <sl-button slot="footer" type="primary">Close</sl-button>
        </sl-drawer>
        <sl-card class="card-image">
         <img
           slot="image"
           src="../assets/minecraft/icons/landscape.jfif">
           Backgrounds
        </sl-card>

        <sl-drawer id="props" label="Props" placement="start">
          <p> Coming soon...</p>
          <p> You'll be able to add props like pickaxes and swords into your avatar's hands</p>
          <sl-button slot="footer" type="primary">Close</sl-button>
        </sl-drawer>
        <sl-card class="card-image">
         <img
           slot="image"
           src="../assets/minecraft/icons/pickaxe.png">
           Props
        </sl-card>
        <sl-drawer id="options" label="Options" placement="start">
          <div class='settingsList'>
            <sl-checkbox id="video-feed-checkbox" checked>
              Show video feed
            </sl-checkbox>
            <sl-checkbox id="perf-stats-checkbox" checked>
              Show performance stats
            </sl-checkbox>
          </div>
          <p> More options coming soon...</p>
          <sl-button slot="footer" type="primary">Close</sl-button>
        </sl-drawer>
        <sl-card class="card-image">
         <img
           slot="image"
           src="../assets/minecraft/icons/settings.png">
           Options
        </sl-card>
      </div>

      <div class="canvas-container">
        <a-scene id="scene" embedded
                 stats
                 vr-mode-ui="enabled: false">
          <a-assets>
            <img id="steve-skin" src="../assets/minecraft/skins/steve.png">
            <img id="alex-skin" src="../assets/minecraft/skins/alex.png">
            <img id="creeper-skin" src="../assets/minecraft/skins/creeper.png">
            <img id="dantdm-skin" src="../assets/minecraft/skins/dantdm.png">
          </a-assets>
          <a-entity id="head-rotator"
                    position="0 1.1 -2"
                    block-head>
            <a-box id="head" position ="0 0.5 0"
                             skin16-net = "bottomleft: 0, 12;
                                           width: 2;
                                           depth: 2;
                                           height: 2"
                             material-pixellated="src: #steve-skin">
              <a-box id="headgear"
                      skin16-net = "bottomleft: 8, 12;
                                    width: 2;
                                    depth: 2;
                                    height: 2"
                      share-material="ref:#head"
                      scale="1.06 1.06 1.06">
              </a-box>
              <a-box id="left-eye" position ="0.25 -0.05 0.5"
                                   scale="0.25 0.2 0.05"
                                   material="color:white">
              </a-box>
              <a-box id="left-pupil" position ="0.25 -0.05 0.5"
                                     scale="0.05 0.05 0.06"
                                     material="color:black">
              </a-box>
              <a-box id="left-eyebrow" position ="0.25 0.1 0.5"
                                   scale="0.2 0.05 0.05"
                                   material="color:brown">
              </a-box>
              <a-box id="right-eye" position ="-0.25 -0.05 0.5"
                                    scale="0.25 0.2 0.05"
                                    material="color:white">
              </a-box>
              <a-box id="right-pupil" position ="-0.25 -0.05 0.5"
                                     scale="0.05 0.05 0.06"
                                     material="color:black">
              </a-box>
              <a-box id="right-eyebrow" position ="-0.25 0.1 0.5"
                                       scale="0.2 0.05 0.05"
                                       material="color:brown">
              </a-box>
              <a-box id="mouth" position ="0 -0.35 0.5"
                                scale = "0.3 0.1 0.05"
                                material="color:red">
              </a-box>
            </a-box>
          </a-entity>
          <a-box id="body" position ="0 0.35 -2"
                           width="1"
                           height="1.5"
                           depth="0.5"
                           skin16-net = "bottomleft: 4, 8;
                                         width: 2;
                                         depth: 1;
                                         height: 3"
                           share-material="ref:#head"
                           pose>
            <a-entity id="right-arm-rotator"
                      position="-0.5 0.5 0"
                      rotation="-10 0 0">
              <a-box id="right arm" position ="-0.25 -0.125 0"
                             width="0.5"
                             height="0.75"
                             depth="0.5"
                             skin16-net = "bottomleft: 10, 9.5;
                                           width: 1;
                                           depth: 1;
                                           height: 1.5"
                             share-material="ref:#head">
              </a-box>
              <a-entity id="right-forearm-rotator"
                        position="-0.25 -0.5 0"
                        rotation="0 0 0">
                <a-box id="right forearm" position ="0 -0.25 0"
                               width="0.5"
                               height="0.75"
                               depth="0.5"
                               skin16-net = "bottomleft: 10, 8;
                                             width: 1;
                                             depth: 1;
                                             height: 1"
                               share-material="ref:#head">
                </a-box>
              </a-entity>
            </a-entity>
            <a-entity id="left-arm-rotator"
                      position="0.5 0.5 0"
                      rotation="-10 0 0">
              <a-box id="left arm" position ="0.25 -0.125 0"
                             width="0.5"
                             height="0.75"
                             depth="0.5"
                             skin16-net = "bottomleft: 8, 1.5;
                                           width: 1;
                                           depth: 1;
                                           height: 1.5"
                            share-material="ref:#head">
              </a-box>
              <a-entity id="left-forearm-rotator"
                        position="0.25 -0.5 0"
                        rotation="0 0 0">
                <a-box id="left-forearm" position ="0 -0.25 0"
                               width="0.5"
                               height="0.75"
                               depth="0.5"
                               skin16-net = "bottomleft: 8, 0;
                                             width: 1;
                                             depth: 1;
                                             height: 1"
                               share-material="ref:#head">
                </a-box>
              </a-entity>
            </a-entity>

          </a-box>
          <a-entity id="right-leg-rotator"
                    position="-0.25 -0.375 -2"
                    rotation="0 0 -2.5">
            <a-box id="right-leg" position ="0 -0.75 0"
                           width="0.5"
                           height="1.5"
                           depth="0.5"
                           skin16-net = "bottomleft: 0, 8;
                                         width: 1;
                                         depth: 1;
                                         height: 3"
                           share-material="ref:#head">
            </a-box>
          </a-entity>
          <a-entity id="left-leg-rotator"
                    position="0.25 -0.375 -2"
                    rotation="0 0 2.5">
            <a-box id="left-leg" position ="0 -0.75 0"
                           width="0.5"
                           height="1.5"
                           depth="0.5"
                           skin16-net = "bottomleft: 4, 0;
                                         width: 1;
                                         depth: 1;
                                         height: 3"
                          share-material="ref:#head">
            </a-box>
          </a-entity>

        </a-scene>
      </div>
    </div>
    <script src="../src/controls.js"></script>
  </body>
</html>
